(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{303:function(e,t,a){e.exports=a(594)},308:function(e,t,a){},573:function(e,t,a){},579:function(e,t,a){},594:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),i=(a(308),a(70)),o=a(202),s=a.n(o),u=a(276),m=a(17),d=a.n(m);function p(){return{type:"auth_user",payload:d.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var h=a(49),f=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function l(l){var c=Object(h.c)((function(e){return e.user})),i=Object(h.b)();return Object(n.useEffect)((function(){i(p()).then(function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,!n.payload.isAuth;case 2:if(!e.sent){e.next=6;break}t&&l.history.push("/login"),e.next=7;break;case 6:(a&&!n.payload.isAdmin||!1===t)&&l.history.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[i,l.history,c.googleAuth]),r.a.createElement(e,Object.assign({},l,{user:c}))}return l},E=a(7),b=a(30),v=a(4),g=a(599),y=a(10),O=a(104),j=a(52),w=a(607),k=a(601),x=a(102),C=k.a.Panel;var S=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(k.a,{defaultActiveKey:e.defaultActiveKey},r.a.createElement(C,{header:e.filtername,key:e.keyvalue},r.a.createElement(O.a,{gutter:[4,4]},e.list&&e.list.map((function(t,a){return r.a.createElement(j.a,{lg:6,xs:24,key:a},r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(x.a,{key:a,onChange:function(){return function(t){var a=l.indexOf(t),n=Object(b.a)(l);-1===a?n.push(t):n.splice(a,1),c(n),e.handleFilters(n)}(t._id)},type:"checkbox",checked:-1!==l.indexOf(t._id)}),"\xa0\xa0",r.a.createElement("span",{style:{fontSize:"10px"}},t.name)))}))))))},I=[{_id:0,name:"Commodity"},{_id:1,name:"Electronics"},{_id:2,name:"Furniture"},{_id:3,name:"Food & Drinks"},{_id:4,name:"Clothes/Bags"},{_id:5,name:"Makeup"},{_id:6,name:"Others"}],_=[{_id:0,name:"Lorenzo\u81ea\u53d6"},{_id:1,name:"Gateway\u81ea\u53d6"},{_id:2,name:"K-town\u81ea\u53d6"},{_id:3,name:"Downtown\u81ea\u53d6"},{_id:4,name:"USC\u5468\u8fb9\u81ea\u53d6"},{_id:5,name:"LA\u5176\u4ed6\u5730\u533a\u81ea\u53d6"},{_id:6,name:"USC\u9644\u8fd1\u53ef\u9001"},{_id:7,name:"\u5730\u70b9\u53ef\u5546\u8bae"}],D=a(604),P=D.a.Search;var N=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(P,{value:l,onChange:function(e){c(e.currentTarget.value)},onSearch:function(){e.refreshFunction(l),c("")},enterButton:"Search",placeholder:"Search By Typing..."}))},B=a(66),L=a.n(B),F=a(152),T=g.a.Meta;var A=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(0),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(""),p=Object(v.a)(m,2),h=p[0],f=p[1],k=Object(n.useState)(!0),x=Object(v.a)(k,2),C=x[0],D=x[1],P=Object(n.useState)({width:0}),B=Object(v.a)(P,2),A=B[0],U=B[1],q=Object(n.useState)({category:[],tag:[]}),z=Object(v.a)(q,2),M=z[0],R=z[1],K=function(e){var t="None";return _.map((function(a){return a._id===e&&(t=a.name),null})),t},H=Object(n.useCallback)((function(){var e=.75*document.documentElement.clientWidth,t=parseInt(e/300)+1,a=parseInt((e-15*(t-1))/t);U({width:a})}),[]);Object(n.useEffect)((function(){var e=.75*document.documentElement.clientWidth,t=parseInt(e/300)+1,a=parseInt((e-15*(t-1))/t);U({width:a})}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",H),function(){window.removeEventListener("resize",H)}}),[H]),Object(n.useEffect)((function(){d.a.post("/api/product/getProducts",{skip:0,limit:8}).then((function(e){e.data.success?(D(!(e.data.postSize<8)),c(e.data.products)):alert("Failed to fectch product datas")}))}),[]);var V=function(e){d.a.post("/api/product/getProducts",e).then((function(t){t.data.success?(D(!(t.data.postSize<8)),e.loadMore?c([].concat(Object(b.a)(l),Object(b.a)(t.data.products))):c(t.data.products)):alert("Failed to fectch product datas")}))},W=function(e,t){var a=Object(E.a)({},M);a[t]=e,function(e){V({skip:0,limit:8,filters:e}),u(0)}(a),R(a)};return r.a.createElement("div",{style:{height:"100%",width:"75%",margin:"3rem auto",overflow:"hidden"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null," ","Let's Sell & Buy ",r.a.createElement(y.a,{type:"rocket"})," ")),r.a.createElement(O.a,{gutter:[16,16]},r.a.createElement(j.a,{lg:12,xs:24},r.a.createElement(S,{key:1,keyvalue:1,defaultActiveKey:["0"],list:_,handleFilters:function(e){return W(e,"tag")},filtername:"\u4ea4\u6613\u65b9\u5f0f",category:"tag"})),r.a.createElement(j.a,{lg:12,xs:24},r.a.createElement(S,{key:2,keyvalue:2,defaultActiveKey:["0"],list:I,handleFilters:function(e){return W(e,"category")},filtername:"\u7269\u54c1\u79cd\u7c7b",category:"category"}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",margin:"1rem auto"}},r.a.createElement(N,{refreshFunction:function(e){var t={skip:0,limit:8,filters:M,searchTerm:e};u(0),f(e),V(t)}})),0===l.length?r.a.createElement("div",{style:{display:"flex",height:"300px",justifyContent:"center",alignItems:"center"}},r.a.createElement("h2",null,"\u6682\u672a\u76f8\u5173\u7269\u54c1\uff0c\u60a8\u53ef\u4ee5\u91cd\u65b0\u9009\u62e9\u7b5b\u9009/\u641c\u7d22\u5185\u5bb9\u6216\u70b9\u51fb",r.a.createElement("a",{href:"/"},"Home"),"\u8fd4\u56de")):r.a.createElement("div",{style:{width:"calc(100% + 15px)",overflowX:"hidden",overflowY:"auto"}},r.a.createElement(F.a,{dataLength:l.length,next:function(){return function(){console.log("loadmore");var e=s+8;V({skip:e,limit:8,loadMore:!0,filters:M,searchTerm:h}),u(e)}()},hasMore:C,loader:r.a.createElement("h4",null,"Loading..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Yay! You have seen it all"))},r.a.createElement(L.a,{className:"my-gallery-class",options:{transitionDuration:2},disableImagesLoaded:!1,updateOnEachImageLoad:!1},l.map((function(e,t){return r.a.createElement("div",{key:t,style:{marginRight:"15px",marginBottom:"10px",display:"inline-block",width:A.width+"px"}},r.a.createElement(g.a,{hoverable:!0,cover:r.a.createElement("a",{href:"/product/".concat(e._id)},r.a.createElement("img",{style:{width:A.width-2+"px"},src:"http://3.15.2.141/".concat(e.images[0]),alt:""}))},r.a.createElement(T,{title:e.title,description:r.a.createElement("div",null,"$".concat(e.price),r.a.createElement(w.a,{style:{float:"right"}},K(e.tag)))})))}))))),r.a.createElement("br",null),r.a.createElement("br",null))},U=a(101),q=a(31),z=a(602),M=a(600),R=a(45),K=z.a.Title;var H=Object(i.f)((function(e){var t=Object(h.b)(),a=!!localStorage.getItem("rememberMe"),l=Object(n.useState)(""),c=Object(v.a)(l,2),i=c[0],o=c[1],s=Object(n.useState)(a),u=Object(v.a)(s,2),m=u[0],p=u[1],f=function(){p(!m)},E=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return r.a.createElement(U.a,{initialValues:{email:E,password:""},validationSchema:q.object().shape({email:q.string().email("Email is invalid").required("Email is required"),password:q.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return{type:"login_user",payload:d.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===m?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.push("/")):o("Check out your Account or Password again")})).catch((function(e){o("Check out your Account or Password again"),setTimeout((function(){o("")}),3e3)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),c=e.handleChange,o=e.handleBlur,s=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement(K,{level:2},"Log In"),r.a.createElement("form",{onSubmit:s,style:{width:"350px"}},r.a.createElement(M.a.Item,{required:!0},r.a.createElement(D.a,{id:"email",prefix:r.a.createElement(y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:c,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(M.a.Item,{required:!0},r.a.createElement(D.a,{id:"password",prefix:r.a.createElement(y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:c,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),i&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},i)),r.a.createElement(M.a.Item,null,r.a.createElement(x.a,{id:"rememberMe",keyvalue:"rememberMe",onChange:f,checked:m},"Remember me"),r.a.createElement("a",{className:"login-form-forgot",href:"/change",style:{float:"right"}},"forgot password"),r.a.createElement("div",null,r.a.createElement(R.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:l,onSubmit:s},"Log in")),"Or ",r.a.createElement("a",{href:"/register"},"register now!"))))}))})),V=a(119),W=a.n(V),G=a(288),X=a(289),Y=a(300),$=a(298);function J(e){var t=e.value.length;if(e.createTextRange){var a=e.createTextRange();a.moveStart("character",-t),a.moveEnd("character",-t),a.moveStart("character",0),a.moveEnd("character",t),a.select()}else e.setSelectionRange(0,t),e.focus()}function Q(e){return(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue&&(e.returnValue=!1),e.stopPropagation&&e.stopPropagation(),!1}function Z(e){return"function"===typeof e}a(573);var ee=function(e){Object(Y.a)(a,e);var t=Object($.a)(a);function a(e){var n;return Object(G.a)(this,a),(n=t.call(this,e)).state={code:new Array(e.length).fill(""),dom:new Array(e.length)},n}return Object(X.a)(a,[{key:"onChange",value:function(e,t){var a=e.target.value.trim();if(!Z(this.props.validator)||""===a||this.props.validator(a,t)){this.state.code[t]!==a&&a&&this.focusOn(t+1);var n=this.state.code.map((function(e){return e}));n[t]=a,this.setState({code:n}),J(e.target),""!==a&&this.focusOn(t+1),Z(this.props.onChange)&&(n.every((function(e){return""!==e}))&&e.target.blur(),this.props.onChange(n))}else J(e.target)}},{key:"getPrevBox",value:function(e){return this.state.dom[e-1]}},{key:"getNextBox",value:function(e){return this.state.dom[e+1]}},{key:"focusOn",value:function(e){var t=this.state.dom[e];t&&t.focus()}},{key:"onKeyDown",value:function(e,t){var a=e.target;switch(e.keyCode){case 8:""===e.target.value&&(Q(e),this.focusOn(t-1));break;case 37:case 38:Q(e),this.getPrevBox(t)?this.focusOn(t-1):this.focusOn(t);break;case 39:case 40:Q(e),this.getNextBox(t)?this.focusOn(t+1):this.focusOn(t);break;default:J(a)}}},{key:"componentDidCatch",value:function(e,t){console.error(e)}},{key:"render",value:function(){var e=this,t=[];this.state.dom=[];for(var a=this.props.type||"input",n=function(n){t.push(r.a.createElement("div",{key:n,className:"codebox-field-wrap"},r.a.createElement("input",{type:a,maxLength:"1",autoComplete:"false",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",value:e.state.code[n],ref:function(t){return e.state.dom[n]=t},onFocus:function(e){return J(e.target)},onClick:function(e){return J(e.target)},onChange:function(t){return e.onChange(t,n)},onKeyDown:function(t){return e.onKeyDown(t,n)}})))},l=0;l<this.props.length;l++)n(l);return r.a.createElement("div",{className:"codebox-container"},r.a.createElement("div",null,t))}}]),a}(n.Component),te={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},ae={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var ne=function(e){var t=Object(h.b)(),a=Object(n.useState)("0000"),l=Object(v.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)("initialId"),s=Object(v.a)(o,2),u=s[0],m=s[1],p=Object(n.useState)(!1),f=Object(v.a)(p,2),E=f[0],b=f[1],g=Object(n.useState)("Get Verification Code From Email"),y=Object(v.a)(g,2),O=y[0],j=y[1];return r.a.createElement(U.a,{initialValues:{email:"",username:"",verification:"",password:"",confirmPassword:""},validationSchema:q.object().shape({username:q.string().required("Username is required"),email:q.string().email("Email is invalid").required("Email is required"),password:q.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:q.string().oneOf([q.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password,username:a.username,verifyId:u,verifyCode:c,image:"http://gravatar.com/avatar/".concat(W()().unix(),"?d=identicon")};t(function(e){return{type:"register_user",payload:d.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.success?e.history.push("/login"):(11e3===t.payload.err.code?alert("User already exists"):alert(t.payload.err.errmsg),window.location.reload())})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),c=e.handleChange,o=e.handleBlur,s=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Sign up"),r.a.createElement(M.a,Object.assign({style:{minWidth:"375px"}},te,{onSubmit:s}),r.a.createElement(M.a.Item,{required:!0,label:"Username"},r.a.createElement(D.a,{id:"username",placeholder:"Enter your username",type:"text",value:t.username,onChange:c,onBlur:o,className:n.username&&a.username?"text-input error":"text-input"}),n.username&&a.username&&r.a.createElement("div",{className:"input-feedback"},n.username)),r.a.createElement(M.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},r.a.createElement(D.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:c,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(M.a.Item,{required:!0,label:"Verification",style:{marginBottom:"0 px"}},r.a.createElement(M.a.Item,null,r.a.createElement(ee,{id:"verification",type:"text",length:4,validator:function(e,t){return/\d/.test(e)},onChange:function(e){i(e.join(""))}}),r.a.createElement(R.a,{onClick:function(){b(!0),j("wait about 15 s");var e={email:t.email};d.a.post("/api/users/sendEmail",e).then((function(e){e.data.success?(m(e.data.id),setTimeout((function(){b(!1),j("send again")}),15e3)):(alert("Failed to send email"),b(!1),j("Get Verification Code From Email"))}))},type:"primary",block:!0,loading:E},O))),r.a.createElement(M.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},r.a.createElement(D.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:c,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(M.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},r.a.createElement(D.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:c,onBlur:o,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(M.a.Item,ae,r.a.createElement(R.a,{onClick:s,type:"primary",disabled:l},"Submit"))))}))},re=a(210);var le=function(e){return r.a.createElement(re.a,{mode:e.mode},r.a.createElement(re.a.Item,{key:"mail"},r.a.createElement("a",{href:"/"},"Home")),r.a.createElement(re.a.Item,{key:"contact"},r.a.createElement("a",{href:"/contactus"},"Contact Us")))},ce=a(160);var ie=Object(i.f)((function(e){var t=Object(h.c)((function(e){return e.user})),a=r.a.createElement(re.a,null,r.a.createElement(re.a.Item,null,r.a.createElement("a",{href:"/user/item"},"My Items")),r.a.createElement(re.a.Item,null,r.a.createElement("a",{href:"/history"},"History")),r.a.createElement(re.a.Item,null,r.a.createElement("a",{href:"/change"},"Change Password")),r.a.createElement(re.a.Item,null,r.a.createElement("a",{onClick:function(){d.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")}))}},"Logout")));return t.userData&&!t.userData.isAuth?r.a.createElement(re.a,{mode:e.mode},r.a.createElement(re.a.Item,{key:"mail"},r.a.createElement("a",{href:"/login"},"Signin")),r.a.createElement(re.a.Item,{key:"app"},r.a.createElement("a",{href:"/register"},"Signup"))):r.a.createElement(re.a,{mode:e.mode},r.a.createElement(re.a.Item,{key:"user"},r.a.createElement(ce.a,{overlay:a,placement:"bottomCenter"},r.a.createElement(y.a,{type:"user",style:{fontSize:25,marginBottom:20}}))),r.a.createElement(re.a.Item,{key:"upload"},r.a.createElement("a",{href:"/product/upload"},"Upload")))})),oe=a(605);a(579);var se=function(){var e=Object(n.useState)(!1),t=Object(v.a)(e,2),a=t[0],l=t[1];return r.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"}},r.a.createElement("div",{className:"menu__logo"},r.a.createElement("a",{href:"/"},"Logo")),r.a.createElement("div",{className:"menu__container"},r.a.createElement("div",{className:"menu_left"},r.a.createElement(le,{mode:"horizontal"})),r.a.createElement("div",{className:"menu_rigth"},r.a.createElement(ie,{mode:"horizontal"})),r.a.createElement(R.a,{className:"menu__mobile-button",type:"primary",onClick:function(){l(!0)}},r.a.createElement(y.a,{type:"align-right"})),r.a.createElement(oe.a,{title:"Basic Drawer",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){l(!1)},visible:a},r.a.createElement(le,{mode:"inline"}),r.a.createElement(ie,{mode:"inline"}))))};var ue=function(){return r.a.createElement("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}},r.a.createElement("p",null," Happy Coding  ",r.a.createElement(y.a,{type:"smile"})))},me=a(603);var de=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){if(e.visible){var a=0;function n(e,n,r){var l=t.current.getContext("2d");l.drawImage(e,0,a),l.font="40px Arial",l.fillStyle="red",l.textAlign="center",l.fillText(n,351,a+30,700),a+=r}e.items.map((function(e){var t=e.title+" $".concat(e.price),a=e.heights[0],r=new Image;return r.setAttribute("crossOrigin","Anonymous"),r.src="http://3.15.2.141/".concat(e.images[0]),r.complete?n(r,t,a):(r.onload=function(){n(r,t,a)},r.onerror=function(){alert("failed to load picture")}),null}))}}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{forceRender:!0,title:"Successfully uploaded ! Click save to download your picture",visible:e.visible,onOk:function(){!function(e,t){var a=document.createElement("a");a.href=e.toDataURL("image/jpeg",1),a.download=t,a.click()}(t.current,"SCGO_LongPicture_".concat(Date.now()))},onCancel:function(){e.handleCancel()},okText:"save",cancelText:"skip",width:800},r.a.createElement("canvas",{id:"LongPicture",ref:t,width:e.width,height:e.height})))},pe=a(121),he=a(161),fe=a(299);var Ee=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!1),p=Object(v.a)(m,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){c(e.images),u(e.heights),e.images&&e.images.length>0&&f(!0)}),[e]),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},h?r.a.createElement("div",{style:{display:"flex",width:"200px",height:"160px"}},l.map((function(t,a){return r.a.createElement("div",{onClick:function(){return function(t){var a=l.indexOf(t),n=Object(b.a)(l),r=Object(b.a)(s);n.splice(a,1),r.splice(a,1),c(n),u(r),f(!1),e.refreshFunction(n,r)}(t)}},r.a.createElement("img",{style:{minWidth:"200px",width:"200px",height:"160px",objectFit:"contain"},src:"http://3.15.2.141/".concat(t),alt:"productImg-".concat(a)}))}))):r.a.createElement(fe.a,{onDrop:function(t){var a=new FormData;a.append("file",t[0]),d.a.post("/api/product/uploadImage",a,{header:{"content-type":"multipart/form-data"}}).then((function(t){t.data.success?(c([t.data.image]),u([t.data.height]),f(!0),e.refreshFunction([t.data.image],[t.data.height])):alert("Failed to save the Image in Server")}))},multiple:!1,maxSize:8e8},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({style:{width:"200px",height:"160px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),r.a.createElement("input",a()),r.a.createElement(y.a,{type:"plus",style:{fontSize:"2rem"}}))})))},be=[{key:0,value:"Lorenzo"},{key:1,value:"Gateway"},{key:2,value:"K-town"},{key:3,value:"Downtown"},{key:4,value:"USC\u5468\u8fb9"},{key:5,value:"LA\u5176\u4ed6\u5730\u533a"}],ve=[{key:0,value:"Commodity"},{key:1,value:"Electronics"},{key:2,value:"Furniture"},{key:3,value:"Food & Drinks"},{key:4,value:"Clothes/Bags"},{key:5,value:"Makeup"},{key:6,value:"Others"}],ge=[{key:0,value:"\u81ea\u53d6"},{key:1,value:"USC\u9644\u8fd1\u53ef\u9001"},{key:2,value:"\u5730\u70b9\u53ef\u5546\u8bae"}],ye=[{key:0,value:"Lorenzo\u81ea\u53d6"},{key:1,value:"Gateway\u81ea\u53d6"},{key:2,value:"K-town\u81ea\u53d6"},{key:3,value:"Downtown\u81ea\u53d6"},{key:4,value:"USC\u5468\u8fb9\u81ea\u53d6"},{key:5,value:"LA\u5176\u4ed6\u5730\u533a\u81ea\u53d6"},{key:6,value:"USC\u9644\u8fd1\u53ef\u9001"},{key:7,value:"\u5730\u70b9\u53ef\u5546\u8bae"}],Oe=[{key:0,value:"\u5df2\u51fa\u552e"},{key:1,value:"\u7269\u54c1\u4fe1\u606f\u9519\u8bef"},{key:2,value:"\u5176\u4ed6\u539f\u56e0"}],je=D.a.TextArea,we=pe.a.Option;var ke=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(0),d=Object(v.a)(m,2),p=d[0],h=d[1],f=Object(n.useState)(0),E=Object(v.a)(f,2),b=E[0],g=E[1],y=Object(n.useState)(-1),O=Object(v.a)(y,2),j=O[0],w=O[1],k=Object(n.useState)(0),x=Object(v.a)(k,2),C=x[0],S=x[1],I=Object(n.useState)([]),_=Object(v.a)(I,2),P=_[0],N=_[1],B=Object(n.useState)([]),L=Object(v.a)(B,2),F=L[0],T=L[1];Object(n.useEffect)((function(){e.edit&&(c(e.currentItem.title),u(e.currentItem.description),h(e.currentItem.price),g(e.currentItem.means),w(e.currentItem.places),S(e.currentItem.category),N(e.currentItem.images),T(e.currentItem.heights))}),[e]);var A=function(){c(""),u(""),h(0),g(0),w(-1),S(0),N([]),T([])};return r.a.createElement("div",null,r.a.createElement(me.a,{title:"Product",visible:e.visible,onOk:function(){if(!l||!s||!p||!P.length)return alert("fill all the fields first!");if(0===b&&-1===j)return alert("\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u81ea\u53d6\u5730\u70b9\uff01");var t,a,n={writer:e.user.userData._id,title:l,description:s,price:p,images:P,heights:F,means:b,places:j,tag:(t=b,a=j,0===t?a:t+5),category:C};e.handleOk(n),A()},onCancel:function(){e.handleCancel(),A()},destroyOnClose:!0},r.a.createElement(M.a,null,r.a.createElement(Ee,{refreshFunction:function(e,t){N(e),T(t)},images:P,heights:F}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Title:"),r.a.createElement(D.a,{onChange:function(e){e.currentTarget.value.length<16&&c(e.currentTarget.value)},value:l}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description:"),r.a.createElement(je,{onChange:function(e){u(e.currentTarget.value)},value:s}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Price($):"),r.a.createElement(D.a,{onChange:function(e){h(e.currentTarget.value)},value:p,type:"number"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"\u4ea4\u6613\u65b9\u5f0f:"),"\xa0",r.a.createElement(he.a.Group,{onChange:function(e){g(e.target.value)},value:b},ge.map((function(e){return r.a.createElement(he.a,{key:e.key,value:e.key},e.value)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"\u81ea\u53d6\u5730\u70b9:"),"\xa0",r.a.createElement(pe.a,{style:{width:200},placeholder:!0,optionFilterProp:"children",onChange:function(e){w(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:-1!==j?j:null,disabled:b},be.map((function(e){return r.a.createElement(we,{key:e.key,value:e.key},e.value)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"\u7269\u54c1\u79cd\u7c7b:"),"\xa0",r.a.createElement(pe.a,{style:{width:200},onChange:function(e){S(e)},value:C},ve.map((function(e){return r.a.createElement(we,{key:e.key,value:e.key},e.value," ")}))),r.a.createElement("br",null),r.a.createElement("br",null))))};var xe=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(0),d=Object(v.a)(m,2),p=d[0],h=d[1];Object(n.useEffect)((function(){e.user.userData&&u(e.user.userData.email),e.contact&&(c(e.contact.wechat),u(e.contact.email),h(e.contact.contactchoice))}),[e]);var f=function(e){c(e.currentTarget.value)},E=function(e){u(e.currentTarget.value)},b=function(){c(""),u(e.user.userData.email),h(0)};return r.a.createElement("div",null,r.a.createElement(me.a,{title:"Add Contact",visible:e.visible,onOk:function(){if(0===p&&!l||1===p&&!s)return alert("fill one of the contact way");var t={wechat:l,email:s,contactchoice:p};e.handleOk(t),b()},onCancel:function(){e.handleCancel(),b()},destroyOnClose:!0},r.a.createElement(he.a.Group,{onChange:function(e){h(e.target.value)},value:p},r.a.createElement(he.a,{value:0},"\u5e0c\u671b\u4e70\u5bb6\u76f4\u63a5\u901a\u8fc7\u5fae\u4fe1\u8054\u7cfb\u6211",r.a.createElement("br",null),"\u5fae\u4fe1: ",0===p?r.a.createElement(D.a,{onChange:f,value:l}):r.a.createElement(D.a,{onChange:f,value:l,disabled:!0})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(he.a,{value:1},"\u5e0c\u671b\u4e70\u5bb6\u901a\u8fc7\u5176\u4ed6\u65b9\u5f0f\u8054\u7cfb\u6211",r.a.createElement("br",null),"\u5176\u4ed6: ",1===p?r.a.createElement(D.a,{onChange:E,value:s}):r.a.createElement(D.a,{onChange:E,value:s,disabled:!0})))))};var Ce=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)({visible:!1}),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!1),p=Object(v.a)(m,2),h=p[0],f=p[1],y=Object(n.useState)(-1),k=Object(v.a)(y,2),x=k[0],C=k[1],S=Object(n.useState)(!1),I=Object(v.a)(S,2),_=I[0],D=I[1],P=Object(n.useState)({}),N=Object(v.a)(P,2),B=N[0],L=N[1],F=Object(n.useState)({visible:!1}),T=Object(v.a)(F,2),A=T[0],U=T[1];Object(n.useEffect)((function(){e.user.userData&&-1===e.user.userData.role&&e.history.push("/403"),d.a.get("/api/users/getUploadProduct").then((function(e){c(e.data.uploadProduct)}))}),[e]);var q=function(e){u(Object(E.a)(Object(E.a)({},s),{},{visible:!0}))},z=l.map((function(e,t){return r.a.createElement(j.a,null,r.a.createElement(g.a,{hoverable:!1,sytle:{width:"80%"}},r.a.createElement(O.a,{gutter:16},r.a.createElement(j.a,{lg:8,xs:24},r.a.createElement("img",{style:{width:"100%",maxHeight:"150px",objectFit:"contain"},src:"http://3.15.2.141/".concat(e.images[0]),alt:"productImage"})),r.a.createElement(j.a,{lg:10,xs:24},r.a.createElement("p",null,"Title:\xa0",e.title),r.a.createElement("p",null,"Description:\xa0",e.description),r.a.createElement("p",null,"Price:\xa0",e.price),r.a.createElement("p",null,"\u4ea4\u6613\u65b9\u5f0f:\xa0",r.a.createElement(w.a,{style:{width:"100px",textAlign:"center"}},function(e){var t="None";return ye.map((function(a){return a.key===parseInt(e)&&(t=a.value),null})),t}(e.tag))),r.a.createElement("p",null,"\u7269\u54c1\u79cd\u7c7b:\xa0",r.a.createElement(w.a,{style:{width:"100px",textAlign:"center"}},function(e){var t="None";return ve.map((function(a){return a.key===parseInt(e)&&(t=a.value),null})),t}(e.category)))),r.a.createElement(j.a,{lg:6,xs:24},r.a.createElement(R.a,{style:{width:"100px",margin:"10px auto"},onClick:function(){return function(e){f(!0),C(e),L(l[e]),u(Object(E.a)(Object(E.a)({},s),{},{visible:!0}))}(t)}},"\xa0Edit\xa0"),r.a.createElement(R.a,{style:{width:"100px",margin:"10px auto"},onClick:function(){return function(e){var t=Object(b.a)(l);t.splice(e,1),c(t),d.a.post("/api/users/updateUploadProduct",t).then((function(e){console.log("Update successfully")}))}(t)}},"\xa0Delete\xa0")))))}));return r.a.createElement("div",{style:{width:"80%",margin:"3rem auto"}},0===l.length?r.a.createElement("div",{style:{display:"flex",height:"300px",justifyContent:"center",alignItems:"center"}},r.a.createElement("h2",null,"No post yet...")):r.a.createElement("div",{style:{width:"70%",margin:"3rem auto"}},r.a.createElement(O.a,{gutter:[16,16]},z)),r.a.createElement("br",null),r.a.createElement("br",null),l.length>0?r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(R.a,{style:{width:"100px",margin:"25px"},onClick:q},"Add"),r.a.createElement(R.a,{style:{width:"100px",margin:"25px"},onClick:function(){U(Object(E.a)(Object(E.a)({},A),{},{visible:!0}))}},"Submit")):r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(R.a,{style:{width:"100px",margin:"auto"},onClick:q},"Add")),r.a.createElement("div",null,r.a.createElement(ke,{visible:s.visible,handleOk:function(e){var t=Object(b.a)(l);h&&x>-1?(t[x]=e,c(t)):(t=[].concat(Object(b.a)(t),[e]),c(t),L({})),u(Object(E.a)(Object(E.a)({},s),{},{visible:!1})),f(!1),C(-1),d.a.post("/api/users/updateUploadProduct",t).then((function(e){console.log("Update successfully")}))},handleCancel:function(){u(Object(E.a)(Object(E.a)({},s),{},{visible:!1})),f(!1),C(-1),L({})},edit:h,currentItem:h?B:{},user:e.user})),r.a.createElement("div",null,r.a.createElement(xe,{visible:A.visible,handleOk:function(e){U(Object(E.a)(Object(E.a)({},A),{},{visible:!1}));var t=l.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{wechat:e.wechat,email:e.email,contactchoice:e.contactchoice})}));c(t),function(e){d.a.post("/api/product/uploadProduct",e).then((function(e){e.data.success?D(!0):alert("Failed to upload Product!")})),d.a.post("/api/users/updateUploadProduct",[]).then((function(e){console.log("Update successfully")}))}(t)},handleCancel:function(){U(Object(E.a)(Object(E.a)({},A),{},{visible:!1}))},user:e.user})),r.a.createElement("div",null,r.a.createElement(de,{handleCancel:function(){D(!1),c([])},visible:_,items:l,width:752,height:l.reduce((function(e,t){return e+t.heights[0]}),0)})))},Se=a(293),Ie=a.n(Se);var _e=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){if(e.detail.images&&e.detail.images.length>0){var t=[];e.detail.images&&e.detail.images.map((function(e){return t.push({original:"http://3.15.2.141/".concat(e),thumbnail:"http://3.15.2.141/".concat(e)}),null})),c(t)}}),[e.detail]),r.a.createElement("div",null,r.a.createElement(Ie.a,{items:l}))},De=a(608);var Pe=function(e){var t=Object(n.useState)({}),a=Object(v.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){c(e.detail)}),[e.detail]),r.a.createElement("div",null,r.a.createElement(De.a,{title:"\u5546\u54c1\u8be6\u60c5"},r.a.createElement(De.a.Item,{label:"\u4ef7\u683c"}," ",l.price),r.a.createElement(De.a.Item,{label:"\u5546\u54c1\u7c7b\u522b"}," ",function(e){var t="None";return ve.map((function(a){return a.key===e&&(t=a.value),null})),t}(l.category)),r.a.createElement(De.a.Item,{label:"\u4ea4\u6613\u65b9\u5f0f"}," ",function(e){var t="None";return ye.map((function(a){return a.key===e&&(t=a.value),null})),t}(l.tag)),r.a.createElement(De.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0"}," ",l.description)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))};var Ne=function(e){var t=e.match.params.productId,a=Object(n.useState)({}),l=Object(v.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)({visible:!1}),s=Object(v.a)(o,2),u=s[0],m=s[1];Object(n.useEffect)((function(){d.a.get("/api/product/products_by_id?id=".concat(t,"&type=single")).then((function(t){0===t.data.length?e.history.push("/404"):i(t.data[0])}))}),[e,t]);var p=function(){m(Object(E.a)(Object(E.a)({},u),{},{visible:!0}))};return r.a.createElement("div",{className:"postPage",style:{width:"100%",padding:"3rem 4rem"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h1",null,c.title)),r.a.createElement("br",null),r.a.createElement(O.a,{gutter:[16,16]},r.a.createElement(j.a,{lg:12,xs:24},r.a.createElement(_e,{detail:c})),r.a.createElement(j.a,{lg:12,xs:24},r.a.createElement(Pe,{detail:c}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(R.a,{size:"large",shape:"round",type:"danger",style:{margin:"1em 1em"},onClick:p},"\u70b9\u51fb\u8054\u7cfb\u5356\u5bb6"),r.a.createElement("a",{href:"/user/".concat(c.writer?c.writer._id:"")},r.a.createElement(R.a,{size:"large",shape:"round",type:"danger",style:{margin:"1em 1em"},onClick:p},"\u67e5\u770b\u5356\u5bb6\u5546\u54c1"))))),r.a.createElement(me.a,{title:"Show Contact",visible:u.visible,onOk:function(){m(Object(E.a)(Object(E.a)({},u),{},{visible:!1}))},onCancel:function(){m(Object(E.a)(Object(E.a)({},u),{},{visible:!1}))},destroyOnClose:!0},0===c.contactchoice?r.a.createElement("div",null,r.a.createElement("p",null,"\u5356\u5bb6\u7684\u5fae\u4fe1\u53f7\u4e3a",c.wechat,"\uff0c\u60a8\u53ef\u4ee5\u6dfb\u52a0\u5fae\u4fe1\u8054\u7cfb\u5356\u5bb6\u3002")):r.a.createElement("div",null,r.a.createElement("p",null,"\u5356\u5bb6\u7684\u5176\u4ed6\u8054\u7cfb\u65b9\u5f0f\u4e3a",c.email,"\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u5356\u5bb6\u3002"))))};var Be=function(e){return r.a.createElement("div",{style:{width:"80%",margin:"3rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"History")),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u5546\u54c1\u540d\u79f0"),r.a.createElement("th",null,"\u5546\u54c1\u4ef7\u683c"),r.a.createElement("th",null,"\u4e0b\u67b6\u65f6\u95f4"),r.a.createElement("th",null,"\u4e0b\u67b6\u539f\u56e0"))),r.a.createElement("tbody",null,e.user.userData&&e.user.userData.history&&e.user.userData.history.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.dateOfDelete),r.a.createElement("td",null,e.reason))})))))},Le={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Fe={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var Te=function(e){var t=Object(n.useState)("0000"),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)("initialId"),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!1),p=Object(v.a)(m,2),h=p[0],f=p[1],E=Object(n.useState)("Get Verification Code From Email"),b=Object(v.a)(E,2),g=b[0],y=b[1];return r.a.createElement(U.a,{initialValues:{email:"",verification:"",password:"",confirmPassword:""},validationSchema:q.object().shape({email:q.string().email("Email is invalid").required("Email is required"),password:q.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:q.string().oneOf([q.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(t,a){var n=a.setSubmitting;setTimeout((function(){var a={email:t.email,password:t.password,verifyId:s,verifyCode:l};d.a.post("api/users/changepassword",a).then((function(t){t.data.success?e.history.push("/login"):(alert(t.data.err.message),window.location.reload())})),n(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),i=e.handleChange,o=e.handleBlur,s=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Change Password"),r.a.createElement(M.a,Object.assign({style:{minWidth:"375px"}},Le,{onSubmit:s}),r.a.createElement(M.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},r.a.createElement(D.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:i,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(M.a.Item,{required:!0,label:"Verification",style:{marginBottom:"0 px"}},r.a.createElement(M.a.Item,null,r.a.createElement(ee,{id:"verification",type:"text",length:4,validator:function(e,t){return/\d/.test(e)},onChange:function(e){c(e.join(""))}}),r.a.createElement(R.a,{onClick:function(){f(!0),y("wait about 15 s");var e={email:t.email};d.a.post("/api/users/sendEmail",e).then((function(e){e.data.success?(u(e.data.id),setTimeout((function(){f(!1),y("send again")}),15e3)):(alert("Failed to send email"),f(!1),y("Get Verification Code From Email"))}))},type:"primary",block:!0,loading:h},g))),r.a.createElement(M.a.Item,{required:!0,label:"New Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},r.a.createElement(D.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:i,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(M.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},r.a.createElement(D.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:i,onBlur:o,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(M.a.Item,Fe,r.a.createElement(R.a,{onClick:s,type:"primary",disabled:l},"Submit"))))}))},Ae=a(595),Ue=pe.a.Option;var qe=function(e){var t=Object(n.useState)("\u5df2\u51fa\u552e"),a=Object(v.a)(t,2),l=a[0],c=a[1],i=function(e){c(e)};return Object(n.useEffect)((function(){e.admin&&c("\u5546\u54c1\u6d89\u5acc\u8fdd\u89c4\u5df2\u4e0b\u67b6")}),[e.admin]),r.a.createElement("div",null,r.a.createElement(me.a,{title:"Product",visible:e.visible,onOk:function(){var t={reason:l};e.handleOk(t),c("")},onCancel:function(){e.handleCancel(),c("")},destroyOnClose:!0},r.a.createElement(M.a,null,r.a.createElement("label",null,"\u4e0b\u67b6\u539f\u56e0:"),"\xa0",e.admin?r.a.createElement(pe.a,{style:{width:200},placeholder:!0,onChange:i,value:l},r.a.createElement(Ue,{value:"\u5546\u54c1\u6d89\u5acc\u8fdd\u89c4\u5df2\u4e0b\u67b6"},"\u5546\u54c1\u6d89\u5acc\u8fdd\u89c4\u5df2\u4e0b\u67b6"),r.a.createElement(Ue,{value:"\u5176\u4ed6\u539f\u56e0"},"\u5176\u4ed6\u539f\u56e0")):r.a.createElement(pe.a,{style:{width:200},placeholder:!0,onChange:i,value:l},Oe.map((function(e){return r.a.createElement(Ue,{key:e.key,value:e.value},e.value)}))),r.a.createElement("br",null),r.a.createElement("br",null))))};var ze=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)({visible:!1}),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)({}),p=Object(v.a)(m,2),h=p[0],f=p[1],O=Object(n.useState)({visible:!1}),j=Object(v.a)(O,2),w=j[0],k=j[1],x=Object(n.useState)({}),C=Object(v.a)(x,2),S=C[0],I=C[1],_=Object(n.useState)({width:0}),D=Object(v.a)(_,2),P=D[0],N=D[1],B=Object(n.useCallback)((function(){var e=.75*document.documentElement.clientWidth,t=parseInt(e/300)+1,a=parseInt((e-15*(t-1))/t);N({width:a})}),[]);Object(n.useEffect)((function(){var e=.75*document.documentElement.clientWidth,t=parseInt(e/300)+1,a=parseInt((e-15*(t-1))/t);N({width:a})}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",B),function(){window.removeEventListener("resize",B)}}),[B]),Object(n.useEffect)((function(){if(e.user.userData){var t={userid:e.user.userData._id};T(t)}}),[e.user]);var F=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(R.a,{type:"link",onClick:function(){return function(e){I(e),k(Object(E.a)(Object(E.a)({},w),{},{visible:!0}))}(e)}},"\u4e0b\u67b6\u5220\u9664")),r.a.createElement("div",null,r.a.createElement(R.a,{type:"link",onClick:function(){return function(e){f(e),u(Object(E.a)(Object(E.a)({},s),{},{visible:!0}))}(e)}},"\u4fee\u6539\u5185\u5bb9")))},T=function(e){d.a.post("/api/product/getByUser",e).then((function(e){e.data.success?c(Object(b.a)(e.data.products)):alert("failed to get items")}))},A=l.map((function(e,t){return r.a.createElement("div",{key:t,style:{marginRight:"15px",marginBottom:"10px",display:"inline-block",width:P.width+"px"}},r.a.createElement(Ae.a,{content:F(e),title:"Edit"},r.a.createElement(g.a,{hoverable:!0,cover:r.a.createElement("a",{href:"/product/".concat(e._id)},r.a.createElement("img",{style:{width:P.width-2+"px"},src:"http://3.15.2.141/".concat(e.images[0]),alt:""}))},r.a.createElement(g.a.Meta,{title:e.title,description:"$".concat(e.price)}))))}));return r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"\u6211\u7684\u7269\u54c1 ",r.a.createElement(y.a,{type:"account-book"}))),0===l.length?r.a.createElement("div",{style:{display:"flex",height:"300px",justifyContent:"center",alignItems:"center"}},r.a.createElement("h2",null,"No post yet...")):r.a.createElement("div",{style:{width:"calc(100% + 15px)"}},r.a.createElement(L.a,{className:"my-gallery-class",options:{transitionDuration:2},disableImagesLoaded:!1,updateOnEachImageLoad:!1},A)),r.a.createElement("div",null,r.a.createElement(ke,{visible:s.visible,handleOk:function(t){var a=Object(E.a)(Object(E.a)({},h),t);d.a.post("/api/product/updateProduct",a).then((function(t){if(t.data.success){var a={userid:e.user.userData._id};T(a)}else alert("Fail to update product!")})),u(Object(E.a)(Object(E.a)({},s),{},{visible:!1})),f({})},handleCancel:function(){u(Object(E.a)(Object(E.a)({},s),{},{visible:!1})),f({})},edit:!0,currentItem:h,user:e.user})),r.a.createElement("div",null,r.a.createElement(qe,{visible:w.visible,handleOk:function(t){var a=Object(E.a)(Object(E.a)({},S),t);d.a.post("/api/users/deleteProduct",a).then((function(t){var a={userid:e.user.userData._id};T(a)})),I({}),k(Object(E.a)(Object(E.a)({},w),{},{visible:!1}))},handleCancel:function(){I({}),k(Object(E.a)(Object(E.a)({},w),{},{visible:!1}))},user:e.user})))};var Me=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)({width:0}),o=Object(v.a)(i,2),s=o[0],u=o[1],m=e.match.params.userid,p=Object(n.useCallback)((function(){var e=.75*document.documentElement.clientWidth,t=parseInt(e/300)+1,a=parseInt((e-15*(t-1))/t);u({width:a})}),[]);Object(n.useEffect)((function(){var e=.75*document.documentElement.clientWidth,t=parseInt(e/300)+1,a=parseInt((e-15*(t-1))/t);u({width:a})}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[p]),Object(n.useEffect)((function(){if(m){var e={userid:m};d.a.post("/api/product/getByUser",e).then((function(e){e.data.success?c(Object(b.a)(e.data.products)):alert("failed to get items")}))}}),[m]);var h=l.map((function(e,t){return r.a.createElement("div",{style:{marginRight:"15px",marginBottom:"10px",display:"inline-block",width:s.width+"px"}},r.a.createElement(g.a,{hoverable:!0,cover:r.a.createElement("a",{href:"/product/".concat(e._id)},r.a.createElement("img",{style:{width:s.width-2+"px"},src:"http://3.15.2.141/".concat(e.images[0]),alt:""}))},r.a.createElement(g.a.Meta,{title:e.title,description:"$".concat(e.price)})))}));return r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"\u5356\u5bb6\u7684\u7269\u54c1 ",r.a.createElement(y.a,{type:"account-book"}))),0===l.length?r.a.createElement("div",{style:{display:"flex",height:"300px",justifyContent:"center",alignItems:"center"}},r.a.createElement("h2",null,"No post yet...")):r.a.createElement("div",{style:{width:"calc(100% + 15px)"}},r.a.createElement(L.a,{className:"my-gallery-class",options:{transitionDuration:2},disableImagesLoaded:!1,updateOnEachImageLoad:!1},h)))},Re=a(596);var Ke=function(e){var t=Re.a.Content,a=Re.a.Sider;return Object(n.useEffect)((function(){e.user.userData&&(e.user.userData.isAdmin||e.history.push("/403"),e.history.push("/admin/product"))}),[e]),r.a.createElement(Re.a,null,r.a.createElement(a,{width:200,style:{overflow:"auto",height:"100vh",position:"fixed",left:0},className:"site-layout-background"},r.a.createElement(re.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},r.a.createElement(re.a.Item,{onClick:function(){e.history.push("/admin/product")},key:"1"},"\u7269\u54c1\u5ba1\u6838"),r.a.createElement(re.a.Item,{onClick:function(){e.history.push("/admin/user")},key:"2"},"\u7528\u6237\u5ba1\u6838"))),r.a.createElement(t,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:1200}},"Content"))},He=a(606);var Ve=function(e){return r.a.createElement(He.a,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.\u60a8\u7684\u8d26\u6237\u53ef\u80fd\u5df2\u88ab\u5c01\u7981",extra:r.a.createElement(R.a,{onClick:function(){e.history.push("/")},type:"primary"},"Back Home")})};var We=function(e){return r.a.createElement(He.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist..\u60a8\u67e5\u627e\u7684\u5546\u54c1\u53ef\u80fd\u5df2\u4e0b\u67b6",extra:r.a.createElement(R.a,{onClick:function(){e.history.push("/")},type:"primary"},"Back Home")})},Ge=a(597),Xe=g.a.Meta;var Ye=function(){return r.a.createElement("div",{style:{height:"100%",width:"100%",margin:"2rem auto",overflow:"hidden",background:"white"}},r.a.createElement(O.a,null,r.a.createElement(j.a,{xs:{span:20,offset:2},lg:{span:12,offset:6}},r.a.createElement("h1",null,"Contact Us"),r.a.createElement(g.a,{style:{width:"100%",height:"160px",marginTop:16},bordered:!1},r.a.createElement(Xe,{avatar:r.a.createElement(Ge.a,{size:100,src:"/default-thumb.png"}),title:"SCGO Group",description:"Email: haimeiyoujian@scgo.org"})),r.a.createElement("hr",null),r.a.createElement("h1",null,"Contributor"),r.a.createElement(g.a,{style:{width:"100%",height:"160px",marginTop:16},bordered:!1},r.a.createElement(Xe,{avatar:r.a.createElement(Ge.a,{size:100,src:"/default-thumb.png"}),title:"Hanxi",description:"Email: haimeiyoujian@scgo.org"})),r.a.createElement(g.a,{style:{width:"100%",height:"160px",marginTop:16},bordered:!1},r.a.createElement(Xe,{avatar:r.a.createElement(Ge.a,{size:100,src:"/default-thumb.png"}),title:"Harold",description:"Email: haimeiyoujian@scgo.org"})))))},$e=Re.a.Content,Je=Re.a.Sider;var Qe=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(0),o=Object(v.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(!0),p=Object(v.a)(m,2),h=p[0],f=p[1],O=Object(n.useState)({visible:!1}),j=Object(v.a)(O,2),w=j[0],k=j[1],x=Object(n.useState)({}),C=Object(v.a)(x,2),S=C[0],I=C[1];Object(n.useEffect)((function(){e.user.userData&&(e.user.userData.isAdmin||e.history.push("/403"))}),[e]),Object(n.useEffect)((function(){d.a.post("/api/product/getProducts",{skip:0,limit:8}).then((function(e){e.data.success?(f(!(e.data.postSize<8)),c(e.data.products)):alert("Failed to fectch product datas")}))}),[]);var _=function(e){d.a.post("/api/product/getProducts",e).then((function(t){t.data.success?(f(!(t.data.postSize<8)),e.loadMore?c([].concat(Object(b.a)(l),Object(b.a)(t.data.products))):c(t.data.products)):alert("Failed to fectch product datas")}))},D=l.map((function(e,t){return r.a.createElement("div",{style:{marginRight:"15px",marginBottom:"10px",display:"inline-block"}},r.a.createElement(Ae.a,{content:r.a.createElement("div",null,r.a.createElement(R.a,{type:"link",onClick:function(){return function(e){I(e),k(Object(E.a)(Object(E.a)({},w),{},{visible:!0}))}(e)}},"\u4e0b\u67b6\u5220\u9664"))},r.a.createElement(g.a,{style:{width:"270px"},hoverable:!0,cover:r.a.createElement("a",{href:"/product/".concat(e._id)},r.a.createElement("img",{style:{width:"270px",height:"".concat(752/270,"%")},src:"http://3.15.2.141/".concat(e.images[0]),alt:""}))},r.a.createElement(g.a.Meta,{title:e.title,description:e.writer._id}))))}));return r.a.createElement("div",null,r.a.createElement(Re.a,null,r.a.createElement(Je,{width:200,style:{overflow:"auto",height:"100vh",position:"fixed",left:0},className:"site-layout-background"},r.a.createElement(re.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},r.a.createElement(re.a.Item,{onClick:function(){e.history.push("/admin/product")},key:"1"},"\u7269\u54c1\u5ba1\u6838"),r.a.createElement(re.a.Item,{onClick:function(){e.history.push("/admin/user")},key:"2"},"\u7528\u6237\u5ba1\u6838"))),r.a.createElement($e,{className:"site-layout-background",style:{paddingLeft:240,margin:0,minHeight:1200}},r.a.createElement("div",{style:{width:"90%",margin:"3rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",null,"\u6700\u65b0\u7269\u54c1 ",r.a.createElement(y.a,{type:"account-book"}))),0===l.length?r.a.createElement("div",{style:{display:"flex",height:"300px",justifyContent:"center",alignItems:"center"}},r.a.createElement("h2",null,"No post yet...")):r.a.createElement("div",{style:{width:"108%",overflowX:"hidden",overflowY:"auto"}},r.a.createElement(F.a,{dataLength:l.length,next:function(){return function(){console.log("loadmore");var e=s+8;_({skip:e,limit:8,loadMore:!0}),u(e)}()},hasMore:h,loader:r.a.createElement("h4",null,"Loading..."),endMessage:r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Yay! You have seen it all"))},r.a.createElement(L.a,{className:"my-gallery-class",options:{transitionDuration:2},disableImagesLoaded:!1,updateOnEachImageLoad:!1},D)))))),r.a.createElement("div",null,r.a.createElement(qe,{visible:w.visible,handleOk:function(t){var a=Object(E.a)(Object(E.a)({},S),t);d.a.post("/api/users/deleteProduct",a).then((function(t){var a={userid:e.user.userData._id};_(a)})),I({}),k(Object(E.a)(Object(E.a)({},w),{},{visible:!1}))},handleCancel:function(){I({}),k(Object(E.a)(Object(E.a)({},w),{},{visible:!1}))},user:e.user,admin:!0})))},Ze=a(598),et=Re.a.Content,tt=Re.a.Sider,at=Ze.a.Column,nt=D.a.Search;var rt=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(v.a)(i,2),s=o[0],u=o[1];Object(n.useEffect)((function(){e.user.userData&&(e.user.userData.isAdmin||e.history.push("/403"),m({}))}),[e]);var m=function(e){d.a.post("/api/users/getUserByRule",e).then((function(e){if(e.data.success){var t=e.data.users.map((function(e,t){return{key:t,userid:e._id,username:e.username,userstate:e.role}}));console.log(t),c(t)}else console.log("no results"),c([])}))},p=function(){m({searchTerm:s})};return r.a.createElement(Re.a,null,r.a.createElement(tt,{width:200,style:{overflow:"auto",height:"100vh",position:"fixed",left:0},className:"site-layout-background"},r.a.createElement(re.a,{mode:"inline",defaultSelectedKeys:["2"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},r.a.createElement(re.a.Item,{onClick:function(){e.history.push("/admin/product")},key:"1"},"\u7269\u54c1\u5ba1\u6838"),r.a.createElement(re.a.Item,{onClick:function(){e.history.push("/admin/user")},key:"2"},"\u7528\u6237\u5ba1\u6838"))),r.a.createElement(Re.a,null,r.a.createElement(et,{className:"site-layout-background",style:{padding:24,margin:0,marginLeft:"200px",minHeight:1200}},r.a.createElement("div",{style:{background:"white",marginBottom:"20px",margin:"1rem auto",width:"100%"}},r.a.createElement("br",null),r.a.createElement(O.a,{gutter:4},r.a.createElement(j.a,{lg:2,xs:12},r.a.createElement("h3",{style:{margin:"auto"}},"\xa0\xa0\xa0\xa0USER ID\u67e5\u8be2:")),r.a.createElement(j.a,{lg:6,xs:24},r.a.createElement("div",{style:{maxWidth:"400px"}},r.a.createElement(nt,{value:s,onChange:function(e){u(e.currentTarget.value)},onSearch:p,enterButton:"Search",placeholder:"24-character user id"})))),r.a.createElement("br",null)),r.a.createElement("div",{style:{background:"white",marginBottom:"20px"}},r.a.createElement("h3",{style:{padding:"1rem 1rem 1rem 1rem"}},"\u67e5\u8be2\u8868\u683c"),r.a.createElement(Ze.a,{style:{background:"white"},dataSource:l.length>0?l:null},r.a.createElement(at,{bordered:!1,title:"User ID",dataIndex:"userid",key:"userid"}),r.a.createElement(at,{bordered:!1,title:"Username",dataIndex:"username",key:"username"}),r.a.createElement(at,{bordered:!1,title:"User State",dataIndex:"userstate",key:"userstate",render:function(e){return r.a.createElement(w.a,{color:-1===e?"red":"green",key:e},-1===e?"blocked":"normal")}}),r.a.createElement(at,{bordered:!1,title:"Action",key:"action",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(R.a,{style:{width:"80px"},disabled:0!==t.userstate,onClick:function(){return e=t.userid,void d.a.post("/api/users/updateUserState",{userid:e,role:-1}).then((function(e){e.data.success&&(alert("Block Succeed"),p())}));var e}},"Block"),"\xa0",r.a.createElement(R.a,{style:{width:"80px"},disabled:-1!==t.userstate,onClick:function(){return e=t.userid,void d.a.post("/api/users/updateUserState",{userid:e,role:0}).then((function(e){e.data.success&&(alert("Unblock Succeed"),p())}));var e}},"Unblock"))}}))))))};var lt=function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(se,null),r.a.createElement("div",{style:{paddingTop:"75px",minHeight:"calc(100vh - 80px)"}},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/403",component:f(Ve,null)}),r.a.createElement(i.a,{exact:!0,path:"/404",component:f(We,null)}),r.a.createElement(i.a,{exact:!0,path:"/admin",component:f(Ke,!0)}),r.a.createElement(i.a,{exact:!0,path:"/admin/product",component:f(Qe,!0)}),r.a.createElement(i.a,{exact:!0,path:"/admin/user",component:f(rt,!0)}),r.a.createElement(i.a,{exact:!0,path:"/",component:f(A,null)}),r.a.createElement(i.a,{exact:!0,path:"/contactus",component:f(Ye,null)}),r.a.createElement(i.a,{exact:!0,path:"/login",component:f(H,!1)}),r.a.createElement(i.a,{exact:!0,path:"/register",component:f(ne,!1)}),r.a.createElement(i.a,{exact:!0,path:"/product/upload",component:f(Ce,!0)}),r.a.createElement(i.a,{exact:!0,path:"/product/:productId",component:f(Ne,null)}),r.a.createElement(i.a,{exact:!0,path:"/user/item",component:f(ze,!0)}),r.a.createElement(i.a,{exact:!0,path:"/user/:userid",component:f(Me,null)}),r.a.createElement(i.a,{exact:!0,path:"/history",component:f(Be,!0)}),r.a.createElement(i.a,{exact:!0,path:"/change",component:f(Te,null)}))),r.a.createElement(ue,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ct=a(113),it=a(85),ot=Object(it.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(E.a)(Object(E.a)({},e),{},{register:t.payload});case"login_user":return Object(E.a)(Object(E.a)({},e),{},{loginSucces:t.payload});case"auth_user":return Object(E.a)(Object(E.a)({},e),{},{userData:t.payload});case"logout_user":return Object(E.a)({},e);case"add_to_cart_user":return Object(E.a)(Object(E.a)({},e),{},{userData:Object(E.a)(Object(E.a)({},e.userData),{},{cart:t.payload})});case"get_cart_items_user":return Object(E.a)(Object(E.a)({},e),{},{cartDetail:t.payload});case"remove_cart_item_user":return Object(E.a)(Object(E.a)({},e),{},{cartDetail:t.payload.cartDetail,userData:Object(E.a)(Object(E.a)({},e.userData),{},{cart:t.payload.cart})});case"on_success_buy_user":return Object(E.a)(Object(E.a)({},e),{},{userData:Object(E.a)(Object(E.a)({},e.userData),{},{cart:t.payload.cart}),cartDetail:t.payload.cartDetail});case"on_delete_item":return Object(E.a)(Object(E.a)({},e),{},{history:t.payload.history});default:return e}}}),st=a(296),ut=a.n(st),mt=a(297),dt=Object(it.a)(ut.a,mt.a)(it.d);c.a.render(r.a.createElement(h.a,{store:dt(ot,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(ct.a,null,r.a.createElement(lt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[303,1,2]]]);
//# sourceMappingURL=main.8488b962.chunk.js.map